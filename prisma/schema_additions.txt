// Add these models to the end of schema.prisma

model AgentRoomCardSale {
  id         String   @id @default(cuid())
  agentId    String
  agent      Player   @relation("AgentSales", fields: [agentId], references: [id], onDelete: Cascade)
  buyerId    String
  buyer      Player   @relation("BuyerSales", fields: [buyerId], references: [id], onDelete: Cascade)
  cardAmount Int      // 銷售的房卡數量
  status     String   @default("COMPLETED") // COMPLETED, CANCELLED
  createdAt  DateTime @default(now())

  @@map("agent_room_card_sales")
}

model AgentRoomCardProduct {
  id         String   @id @default(cuid())
  cardAmount Int      // 房卡數量
  price      Int      // 價格（新台幣）
  isActive   Boolean  @default(true) // 是否啟用
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  purchases AgentRoomCardPurchase[]

  @@map("agent_room_card_products")
}

model AgentRoomCardPurchase {
  id           String                @id @default(cuid())
  agentId      String
  agent        Player                @relation(fields: [agentId], references: [id], onDelete: Cascade)
  productId    String
  product      AgentRoomCardProduct  @relation(fields: [productId], references: [id], onDelete: Cascade)
  cardAmount   Int                   // 購買的房卡數量
  price        Int                   // 價格
  status       String                @default("PENDING") // PENDING, COMPLETED, REJECTED
  paymentProof String?               // Base64 encoded image
  reviewedBy   String?               // Admin user ID
  reviewedAt   DateTime?
  createdAt    DateTime              @default(now())
  updatedAt    DateTime              @updatedAt

  @@map("agent_room_card_purchases")
}
